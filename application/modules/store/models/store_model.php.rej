***************
*** 4,11 ****
  {
  	public function getItems($realm)
  	{
- 		$this->db->select('*')->from('store_items')->where(array('realm' => $realm))->order_by('group,id', 'ASC');
- 		$query = $this->db->get();
  		
  		if($query->num_rows() > 0)
  		{
--- 4,16 ----
  {
  	public function getItems($realm)
  	{
+ 		//$this->db->select('*')->from('store_items')->where(array('realm' => $realm))->order_by('group,id', 'ASC');
+ 		$query = $this->db->query("SELECT DISTINCT store_items.*
+ 									FROM store_items
+ 									INNER JOIN store_groups ON store_items.group = store_groups.id
+ 									WHERE store_items.realm = ?
+ 									GROUP BY store_items.id
+ 									ORDER BY store_groups.orderNumber ASC, store_items.id ASC;", array($realm));
  		
  		if($query->num_rows() > 0)
  		{
